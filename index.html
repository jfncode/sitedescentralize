<!DOCTYPE html>
<html lang="pt-br">
<head>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finanças descentralizadas</title>
    <!-- Adicione aqui o restante do seu <head> -->
</head>
<body>
    <!-- Adicione aqui o restante do seu HTML -->

    <script>
    // Matrix background animation
    // ...código da animação...

    // Firebase config do seu projeto
    const firebaseConfig = {
        apiKey: "AIzaSyCyLLJWtl7rEbqjdVLahVolXsKHiPOwE9U",
        authDomain: "meusite-e6435.firebaseapp.com",
        projectId: "meusite-e6435",
        storageBucket: "meusite-e6435.firebasestorage.app",
        messagingSenderId: "1026993453307",
        appId: "1:1026993453307:web:e290076c7a8b3690ebd85e",
        measurementId: "G-PBZMXYG7YJ"
    };

    // Inicializa o Firebase apenas se ainda não estiver inicializado
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();

    // Login Google (Firebase)
    const loginBtn = document.getElementById('login-google');
    if (loginBtn) {
        loginBtn.onclick = function() {
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    const user = result.user;
                    alert('Bem-vindo, ' + user.displayName + '!');
                })
                .catch((error) => {
                    alert('Erro no login: ' + error.message);
                });
        };
    }

    // Envio do formulário de contato para o Firestore
    const contactForm = document.querySelector('form');
    if (contactForm) {
        contactForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            try {
                await db.collection('mensagens_contato').add({
                    nome: name,
                    email: email,
                    mensagem: message,
                    data: new Date()
                });
                contactForm.reset();
                // Exibe mensagem de sucesso após o formulário
                const msgEnviada = document.getElementById('msg-enviada');
                if (msgEnviada) {
                    msgEnviada.style.display = 'block';
                    window.scrollTo({ top: msgEnviada.offsetTop - 100, behavior: 'smooth' });
                    setTimeout(() => { msgEnviada.style.display = 'none'; }, 3500);
                }
            } catch (err) {
                alert('Erro ao enviar mensagem: ' + err.message);
            }
        });
    }
    </script>
</body>
</html>
